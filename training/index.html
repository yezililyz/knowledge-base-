<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Data Strategy Guide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Optional: reset default margins -->
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
      }
      #root {
        height: 100%;
      }
    </style>
    <!-- React & ReactDOM (development builds; swap to production in real use) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel so we can use JSX directly in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState } = React;

      const MODULES = [
        {
          id: "foundations",
          label: "Foundations",
          icon: "‚óà",
          color: "#E8C547",
          title: "Data Strategy Foundations for PMs",
          subtitle: "What data strategy actually means at the product level",
        },
        {
          id: "b2b",
          label: "B2B SaaS",
          icon: "‚¨°",
          color: "#5B8AF5",
          title: "Data Strategy in B2B SaaS",
          subtitle: "Enterprise data contracts, multi-tenancy, trust signals",
        },
        {
          id: "api",
          label: "API-First",
          icon: "‚¨¢",
          color: "#4ECDC4",
          title: "Data Strategy for API-First Products",
          subtitle: "Developer experience, usage telemetry, platform flywheels",
        },
        {
          id: "b2c",
          label: "B2C / Marketplace",
          icon: "‚óâ",
          color: "#FF6B6B",
          title: "Data Strategy in B2C & Marketplaces",
          subtitle: "Personalization, supply-demand balance, liquidity metrics",
        },
        {
          id: "systemdesign",
          label: "System Design",
          icon: "‚ñ£",
          color: "#A78BFA",
          title: "Data System Design for PMs",
          subtitle: "How to think architecturally without being an engineer",
        },
        {
          id: "launch",
          label: "Launch Playbook",
          icon: "‚óÜ",
          color: "#FB923C",
          title: "End-to-End Product Launch with Data",
          subtitle: "From hypothesis to instrumentation to post-launch learning",
        },
        {
          id: "quiz",
          label: "Test Yourself",
          icon: "‚óê",
          color: "#34D399",
          title: "Synthesis & Self-Assessment",
          subtitle: "Apply the frameworks across scenarios",
        },
      ];

      const content = {
        foundations: {
          frameworks: [
            {
              name: "The 3-Layer Data Strategy Stack",
              description:
                "Every product data strategy operates at three layers that must be aligned:",
              layers: [
                {
                  name: "Collection Layer",
                  desc: "What signals do you capture? Events, states, interactions, context. The PM decides WHAT to instrument, not HOW.",
                  example:
                    "Mobile game: session start/end, level attempts, ad impressions, IAP triggers",
                },
                {
                  name: "Intelligence Layer",
                  desc: "How do raw signals become decisions? Metrics, models, dashboards, alerts. PM owns the question, not the query.",
                  example:
                    "Retention D1/D7/D30, monetization ARPU/ARPDAU, LTV prediction models",
                },
                {
                  name: "Action Layer",
                  desc: "How does intelligence change the product? Feature flags, personalization, pricing, roadmap. The loop that closes.",
                  example:
                    "Kill/go decisions based on CPI vs. predicted LTV ratio",
                },
              ],
            },
            {
              name: "The Data PM Mindset Shift",
              description:
                "Senior PMs think differently about data than junior ones:",
              shifts: [
                {
                  from: "Reporting on data",
                  to: "Designing for data collection",
                },
                {
                  from: "Asking 'what happened?'",
                  to: "Asking 'what should we measure to decide?'",
                },
                {
                  from: "Waiting for analytics",
                  to: "Defining success metrics before building",
                },
                {
                  from: "Data as evidence",
                  to: "Data as product infrastructure",
                },
                {
                  from: "Dashboard consumer",
                  to: "Instrumentation architect",
                },
              ],
            },
          ],
          keyQuestions: [
            "What decision would this data help me make?",
            "Who owns the metric ‚Äî product, growth, finance?",
            "What's the lagging indicator? What's the leading indicator?",
            "How long before I have enough data to be statistically confident?",
            "What can be gamed, and how does that change what I measure?",
          ],
          caseStudy: {
            title: "Voodoo Publishing Decision Framework",
            context:
              "You receive a new prototype from an external studio. The game has good early organic signals but needs a go/kill decision in 2 weeks.",
            challenge:
              "What's your data strategy for this decision? You have a $15K test budget.",
            steps: [
              {
                step: "Define the decision",
                detail:
                  "Kill/soft-launch/scale ‚Äî what thresholds move you between states?",
              },
              {
                step: "Identify leading indicators",
                detail:
                  "CPI < $0.40 on Tier-3, D1 retention > 40%, session length > 4min",
              },
              {
                step: "Design the test",
                detail:
                  "3-day UA campaign on Meta, 2 creatives, 1 GEO (PH or IN)",
              },
              {
                step: "Set instrumentation requirements",
                detail:
                  "Studio must have MMP (Adjust/AppsFlyer) + event taxonomy agreed before test",
              },
              {
                step: "Define kill criteria upfront",
                detail:
                  "If CPI > $0.80 at day 2 with 500 installs: kill. No exceptions.",
              },
            ],
          },
        },
        b2b: {
          frameworks: [
            {
              name: "B2B Data Contract Framework",
              description:
                "In B2B, data strategy must account for trust, compliance, and multi-tenancy from day one.",
              pillars: [
                {
                  name: "Data Ownership",
                  icon: "‚öñ",
                  desc: "Who owns the data the customer generates? This is a legal AND product question. Ambiguity kills enterprise deals.",
                  pm_action:
                    "Write an explicit data ownership clause in your product documentation, not just legal docs.",
                },
                {
                  name: "Data Isolation",
                  icon: "üîí",
                  desc: "Multi-tenant architectures require PMs to understand row-level security, org scoping, and audit trails.",
                  pm_action:
                    "Define tenant isolation requirements in PRDs. 'Secure' is not a requirement ‚Äî 'no cross-tenant data leakage in all API responses' is.",
                },
                {
                  name: "Data Portability",
                  icon: "üì§",
                  desc: "GDPR/CCPA mandates export. But export design is a product decision ‚Äî what format, what latency, what completeness?",
                  pm_action:
                    "Design the export experience before you design the import. It reveals gaps in your data model.",
                },
                {
                  name: "Data Observability",
                  icon: "üëÅ",
                  desc: "Enterprise customers want to know what data you collect about them. Transparency = trust = renewal.",
                  pm_action:
                    "Build a 'data usage' page in your admin console ‚Äî shows customers their data footprint.",
                },
              ],
            },
          ],
          keyMetrics: {
            acquisition: [
              "Trial-to-paid conversion by ICP segment",
              "Time to first value (TTFV)",
              "Onboarding completion rate by role",
            ],
            engagement: [
              "Feature adoption by seat tier",
              "DAU/MAU by user role",
              "API calls per seat/month",
            ],
            retention: [
              "Net Revenue Retention (NRR)",
              "Logo churn by cohort",
              "Expansion revenue rate",
            ],
            health: [
              "Support ticket rate per feature",
              "Error rate per customer tier",
              "Rollback frequency post-deploy",
            ],
          },
          caseStudy: {
            title: "Go1 ‚Äî Content Intelligence Platform",
            context:
              "Go1 aggregates 100K+ learning courses from 200+ providers and distributes to enterprise HR platforms. You're the PM for the recommendation engine.",
            challenge:
              "Design a data strategy that improves content discovery while satisfying enterprise compliance requirements.",
            approach: [
              {
                phase: "Discovery",
                action:
                  "Map the data flows: learner behavior ‚Üí content metadata ‚Üí employer reporting ‚Üí provider analytics",
                insight:
                  "Discovered learners, admins, and providers have completely different data needs from the same platform",
              },
              {
                phase: "Architecture",
                action:
                  "Define org-scoped vs. aggregated signal separation. Employer can't see cross-org learner behavior.",
                insight:
                  "Built a 'privacy-preserving recommendation' system using only aggregated content engagement, not individual profiles",
              },
              {
                phase: "Instrumentation",
                action:
                  "Defined 12 canonical events: content_viewed, content_completed, content_rated, search_query, search_result_clicked...",
                insight:
                  "Event taxonomy became the contract between engineering, data, and product ‚Äî reduced analytics debt by 60%",
              },
              {
                phase: "Metrics",
                action:
                  "Primary: content completion rate per ICP. Secondary: search-to-completion funnel. Guardrail: employer data isolation audit pass rate",
                insight:
                  "Guardrail metric prevented shipping recommendation improvement that would have failed SOC2 audit",
              },
            ],
          },
        },
        api: {
          frameworks: [
            {
              name: "API-First Data Strategy: The Platform Flywheel",
              description:
                "API products generate data about how people USE your API, which is different from traditional product data. This usage telemetry IS the product.",
              flywheel: [
                { node: "Developer adopts API", next: "Usage telemetry generated" },
                { node: "Usage telemetry ‚Üí insights", next: "Identify friction & power users" },
                { node: "Reduce friction", next: "More adoption, deeper integration" },
                { node: "Power user patterns ‚Üí new endpoints", next: "Platform expands" },
                { node: "Platform expands ‚Üí more developers", next: "Back to start" },
              ],
            },
            {
              name: "API PM Data Dimensions",
              dimensions: [
                {
                  name: "Latency Percentiles",
                  why: "p50 is vanity. p99 is truth. Enterprise SLAs live at p99.",
                  pm_action:
                    "Set SLO thresholds in PRD: p50 < 200ms, p99 < 1s, p999 < 3s. Alert on p99, not average.",
                },
                {
                  name: "Error Budget",
                  why: "SRE concept that PMs must own. How much unreliability is acceptable per month?",
                  pm_action:
                    "Define error budget in launch criteria. If you burn 50% in week 1, you stop shipping features.",
                },
                {
                  name: "Endpoint Funnel",
                  why: "Developers drop off at integration steps. Each failed API call is a conversion loss.",
                  pm_action:
                    "Build a developer onboarding funnel: first API call ‚Üí first successful response ‚Üí first production call.",
                },
                {
                  name: "Usage Cohorts",
                  why: "Not all API users are equal. Segment by call volume, endpoint mix, error rate, recency.",
                  pm_action:
                    "Define 'healthy API consumer' profile. Users outside that profile need proactive outreach.",
                },
              ],
            },
          ],
          keyMetrics: {
            activation: [
              "Time to first successful API call",
              "SDK install to hello world time",
              "Docs page to first call conversion",
            ],
            usage: [
              "API calls/active customer/day",
              "Endpoint adoption breadth",
              "Unique endpoints called per account",
            ],
            reliability: [
              "p99 latency by endpoint",
              "Error rate by error type",
              "Retry rate (signals reliability issues)",
            ],
            growth: [
              "API call growth rate",
              "New endpoint adoption velocity",
              "SDK version upgrade rate",
            ],
          },
          caseStudy: {
            title: "Anthropic Claude API ‚Äî PM Perspective",
            context:
              "You're PM for the Claude API developer experience. You need a data strategy to improve activation (time-to-first-call) and identify at-risk developer accounts.",
            challenge:
              "Thousands of developers sign up but only 30% make their first API call within 7 days. Design a data-driven intervention system.",
            approach: [
              {
                phase: "Instrumentation",
                action:
                  "Define the activation funnel: signup ‚Üí API key created ‚Üí first call attempted ‚Üí first successful call ‚Üí first production call",
                insight:
                  "Discovered 40% drop-off between 'key created' and 'first call attempted' ‚Äî docs friction, not motivation problem",
              },
              {
                phase: "Segmentation",
                action:
                  "Classify developers by intent signal: SDK choice, first endpoint called, model selected, error patterns",
                insight:
                  "Developers calling /messages with claude-haiku on day 1 had 3x higher 30-day retention than those starting with Opus",
              },
              {
                phase: "Intervention",
                action:
                  "Build automated health scores: 0-100 based on recency, frequency, error rate, endpoint diversity",
                insight:
                  "Accounts with score < 30 at day 7 had 80% churn probability ‚Äî trigger docs nudge or sales outreach",
              },
              {
                phase: "Feedback loop",
                action:
                  "A/B test onboarding variants. Measure docs page ‚Üí first call conversion as primary metric.",
                insight:
                  "Interactive playground reduced time-to-first-call from 47min to 8min, lifted 7-day activation by 22%",
              },
            ],
          },
        },
        b2c: {
          frameworks: [
            {
              name: "B2C / Marketplace Dual-Sided Data Model",
              description:
                "Marketplaces have two customers generating data simultaneously. Your strategy must serve both and prevent gaming.",
              sides: {
                supply: {
                  label: "Supply Side",
                  color: "#FF6B6B",
                  metrics: [
                    "Listing quality score",
                    "Fulfillment rate",
                    "Response time",
                    "Cancellation rate",
                  ],
                  strategy:
                    "Build trust signals that filter quality, creating supply-side incentives to perform",
                },
                demand: {
                  label: "Demand Side",
                  color: "#5B8AF5",
                  metrics: [
                    "Search-to-click rate",
                    "Click-to-transaction rate",
                    "Repeat purchase rate",
                    "NPS by category",
                  ],
                  strategy:
                    "Use behavior signals to personalize and reduce decision fatigue",
                },
                intersection: {
                  label: "Marketplace Health",
                  metrics: [
                    "Liquidity rate (searches with ‚â•1 transaction)",
                    "Match quality score",
                    "Price elasticity by category",
                    "Take rate sustainability",
                  ],
                },
              },
            },
            {
              name: "B2C Personalization Data Strategy",
              stages: [
                {
                  stage: "Cold Start",
                  signal: "Device type, geo, referral source, UTM params",
                  action: "Serve popular content by cohort similarity",
                },
                {
                  stage: "Early Signal",
                  signal: "First 3 taps/views, category affinity emerging",
                  action: "Shift toward implicit preference model",
                },
                {
                  stage: "Established User",
                  signal:
                    "Historical transactions, search history, ratings",
                  action: "Deep personalization, cross-sell, loyalty",
                },
                {
                  stage: "At-Risk User",
                  signal:
                    "Declining session freq, failed searches, returns",
                  action:
                    "Trigger winback, surface new inventory, price sensitivity",
                },
                {
                  stage: "Churned",
                  signal: "30+ days inactive",
                  action:
                    "Email/push with personalized hook; else sunset",
                },
              ],
            },
          ],
          keyMetrics: {
            liquidity: [
              "Search-to-transaction rate by category",
              "Avg time to first match",
              "GMV per active listing",
            ],
            engagement: [
              "D1/D7/D30 retention",
              "Sessions/user/week",
              "Avg session depth (pages viewed)",
            ],
            monetization: [
              "Take rate by category",
              "ARPU by user cohort",
              "LTV:CAC ratio",
            ],
            supply: [
              "New supply listing rate",
              "Supply churn rate",
              "Listing quality distribution",
            ],
          },
          caseStudy: {
            title: "Mobile Game as B2C Product ‚Äî Voodoo Portfolio",
            context:
              "You're launching a new casual game. It's passed marketability tests (CPI $0.28, D1 retention 48%). Now you need to design the data strategy for the live operations phase.",
            challenge:
              "The game has ads + IAP monetization. Design a data strategy that maximizes LTV without degrading retention.",
            approach: [
              {
                phase: "Segmentation",
                action:
                  "Classify users at D3: whales (IAP>0), ad-tolerant, ad-resistant, at-risk churners",
                insight:
                  "Ad-resistant users shown 3+ ads/session churn at 2.4x rate ‚Äî segment-based frequency caps worth $0.08 ARPDAU uplift",
              },
              {
                phase: "Monetization funnel",
                action:
                  "Map IAP triggers: level fail >3x, inventory empty, cosmetic unlock prompt. Track prompt-to-purchase rate.",
                insight:
                  "Level 12 had highest prompt-to-purchase rate (18%) vs. game average (4%). Redesigned IAP surface around difficulty spikes.",
              },
              {
                phase: "Retention vs Revenue tradeoff",
                action:
                  "Build guardrail metric: if D7 retention drops >3pp vs. baseline when monetization variant is live ‚Üí rollback",
                insight:
                  "Surfaced that aggressive IAP prompting at level 8 was destroying long-term LTV despite short-term revenue spike",
              },
              {
                phase: "LiveOps data model",
                action:
                  "Design A/B testing framework for seasonal content, limited-time offers, and difficulty curves",
                insight:
                  "Event-driven content improved D30 retention by 12pp ‚Äî data showed players in active events churned 40% less",
              },
            ],
          },
        },
        systemdesign: {
          frameworks: [
            {
              name: "PM's System Design Mental Model",
              description:
                "You don't need to design the system. You need to understand it well enough to define requirements and spot risks.",
              concepts: [
                {
                  concept: "Event Streaming vs. Batch Processing",
                  pm_question:
                    "Do I need to react to this data in real-time or can it wait?",
                  example:
                    "Fraud detection ‚Üí real-time (Kafka). Monthly revenue reporting ‚Üí batch (Spark/Airflow).",
                  decision:
                    "Real-time is 10x more expensive. Justify it with a business case.",
                },
                {
                  concept: "Data Warehouse vs. Data Lake",
                  pm_question:
                    "Is this data structured and query-ready, or do we need raw flexibility?",
                  example:
                    "Finance reporting ‚Üí Warehouse (BigQuery, Redshift). ML feature store, raw logs ‚Üí Lake (S3 + Athena).",
                  decision:
                    "Most PMs need warehouse for metrics. Push back on lake-first approaches without clear use cases.",
                },
                {
                  concept: "Schema Design",
                  pm_question:
                    "What questions will I need to ask of this data in 6 months?",
                  example:
                    "If you don't store 'original price' at time of transaction, you can never analyze discount impact retroactively.",
                  decision:
                    "Review data schemas before engineering finalizes them. Look for missing temporal dimensions.",
                },
                {
                  concept: "Event Taxonomy",
                  pm_question:
                    "What are the canonical verbs and nouns of my product?",
                  example:
                    "user_id, timestamp, event_name, properties{} ‚Äî every event needs these 4. Avoid 'misc' properties.",
                  decision:
                    "Own the event tracking plan as a PM artifact. It's as important as the PRD.",
                },
                {
                  concept: "Data Contracts",
                  pm_question:
                    "What guarantees does upstream data provide to downstream consumers?",
                  example:
                    "If the auth service changes user_id format, every downstream dashboard breaks. Contract prevents this.",
                  decision:
                    "Require data contracts for all high-stakes pipelines. PM should review and sign off.",
                },
              ],
            },
            {
              name: "The PM Data Architecture Review Checklist",
              checklist: [
                "‚úì Are all key user actions instrumented as events?",
                "‚úì Does every event have a consistent schema (user_id, timestamp, context)?",
                "‚úì Is there a data dictionary / event catalog maintained?",
                "‚úì Are there automated data quality checks (null rates, volume anomalies)?",
                "‚úì Is sensitive PII separated from behavioral data?",
                "‚úì Is there a data retention policy defined per data type?",
                "‚úì Can I ask any product question in under 30 minutes with available tooling?",
                "‚úì Do we have a clear owner for each data pipeline?",
                "‚úì Is the cost of data infrastructure tracked as a product metric?",
              ],
            },
          ],
          caseStudy: {
            title:
              "Designing Data Infrastructure for XVentures Event Matching",
            context:
              "XVentures connects investors, founders, and corporates at events using algorithmic matching. You're defining the data architecture requirements.",
            challenge:
              "The platform needs to score 500 attendees against each other in real-time, learn from match outcomes, and provide explainability for each recommendation.",
            approach: [
              {
                phase: "Define data entities",
                action:
                  "Attendee profiles, event contexts, match requests, match outcomes, feedback signals",
                insight:
                  "Outcome tracking (did the match lead to a meeting?) requires a post-event feedback loop ‚Äî often missed in initial design",
              },
              {
                phase: "Choose processing model",
                action:
                  "Real-time scoring during event (streaming) + overnight model retraining (batch) + historical analysis (warehouse)",
                insight:
                  "Hybrid architecture: Kafka for live match requests, Redis for real-time feature cache, BigQuery for model training data",
              },
              {
                phase: "Define the training signal",
                action:
                  "What counts as a 'good match'? Meeting scheduled, meeting held, LinkedIn connection, deal closed?",
                insight:
                  "'Meeting scheduled' is the only signal available same-day. 'Deal closed' is the ultimate signal but lags 6-18 months.",
              },
              {
                phase: "Explainability layer",
                action:
                  "Every match recommendation must have human-readable rationale stored as structured data",
                insight:
                  "Required storing feature weights per recommendation ‚Äî explainability is a PM requirement, not just a nice-to-have",
              },
            ],
          },
        },
        launch: {
          phases: [
            {
              phase: "Phase 0 ‚Äî Pre-Build",
              icon: "‚ù∂",
              color: "#E8C547",
              activities: [
                {
                  activity: "Define North Star Metric",
                  detail:
                    "One metric that best captures value delivered. Not revenue ‚Äî what creates revenue.",
                  example:
                    "Duolingo: DAUs. Airbnb: Nights booked. Voodoo game: D30 retention √ó ARPDAU",
                  output:
                    "Metric documented in PRD with target, baseline, and measurement method",
                },
                {
                  activity: "Build the Metric Tree",
                  detail:
                    "Decompose North Star into driver metrics. Each driver should be actionable by a team.",
                  example: "DAUs = new installs √ó D1 ret √ó D7 ret √ó reactivations",
                  output:
                    "Metric tree diagram owned by PM, reviewed by data/eng/design",
                },
                {
                  activity: "Write the Instrumentation Spec",
                  detail:
                    "Before writing a line of code, define every event you need to track. Include event name, properties, trigger condition.",
                  example:
                    "level_started: {level_id, difficulty, attempt_number, session_id, timestamp}",
                  output:
                    "Tracking plan spreadsheet ‚Äî becomes the contract with analytics",
                },
                {
                  activity: "Define success, failure, and kill criteria",
                  detail:
                    "What numbers move you to scale? What numbers kill the project? Write these down BEFORE you see data.",
                  example:
                    "Success: D7 > 25%, CPI < $0.50 at 500 installs. Kill: CPI > $1.20 OR D1 < 30%.",
                  output:
                    "Decision criteria doc, approved by stakeholders before test begins",
                },
              ],
            },
            {
              phase: "Phase 1 ‚Äî Soft Launch",
              icon: "‚ù∑",
              color: "#5B8AF5",
              activities: [
                {
                  activity: "Instrument before you acquire",
                  detail:
                    "Never buy users before your tracking is validated. Run a 50-user seed test to verify all events fire correctly.",
                  example:
                    "Use Mixpanel/Amplitude/Firebase to validate event schema. Check for nulls, duplicates, missing context.",
                  output: "Analytics QA sign-off before first paid install",
                },
                {
                  activity: "Define your monitoring dashboard",
                  detail:
                    "Build one dashboard that answers: is this launch healthy? Should be viewable in 60 seconds.",
                  example:
                    "Top row: CPI, installs/day, D1 retention. Second row: session length, error rate, crash rate.",
                  output:
                    "Live dashboard linked in #launch Slack channel, updated hourly",
                },
                {
                  activity: "Set anomaly alerts",
                  detail:
                    "Don't rely on humans to notice problems. Set automated alerts for out-of-range metrics.",
                  example:
                    "Alert if D1 retention drops >5pp vs. 7-day rolling average. Alert if error rate > 2%.",
                  output:
                    "Alerting rules in PagerDuty/Datadog/Grafana, tested before launch",
                },
              ],
            },
            {
              phase: "Phase 2 ‚Äî Scale Decision",
              icon: "‚ù∏",
              color: "#4ECDC4",
              activities: [
                {
                  activity: "Conduct the decision review",
                  detail:
                    "Use your pre-defined criteria. Don't let optimism override the framework. Show data, not narrative.",
                  example:
                    "Present: actual vs. target for each criterion. Mark green/yellow/red. Recommendation with confidence level.",
                  output:
                    "Go/kill/iterate decision documented with rationale",
                },
                {
                  activity: "Identify the constraint",
                  detail:
                    "What's the one thing limiting growth? Acquisition cost? Retention? Monetization? Focus resources on the bottleneck.",
                  example:
                    "If CPI is good but D7 retention is low ‚Üí retention is the constraint ‚Üí no point scaling UA yet",
                  output:
                    "Constraint clearly named. Next sprint focused on moving that single metric.",
                },
                {
                  activity: "Design the learning agenda",
                  detail:
                    "What do you still not know? Turn unknowns into experiments with pre-registered hypotheses.",
                  example:
                    "Unknown: Does tutorial length affect D1 retention? Experiment: 3-step vs. 8-step tutorial, 50/50 split.",
                  output:
                    "A/B test backlog with prioritization by expected impact and confidence",
                },
              ],
            },
            {
              phase: "Phase 3 ‚Äî Live Operations",
              icon: "‚ùπ",
              color: "#34D399",
              activities: [
                {
                  activity: "Maintain the metric tree",
                  detail:
                    "As the product matures, the metric tree evolves. Review quarterly. Kill metrics that no longer drive decisions.",
                  example:
                    "Early stage: acquisition metrics dominate. Maturity: retention and monetization metrics dominate.",
                  output:
                    "Living metric tree doc with last-updated date and owner",
                },
                {
                  activity: "Build the experimentation culture",
                  detail:
                    "Every feature is a hypothesis. Run A/B tests by default, not by exception. Track experiment velocity.",
                  example:
                    "Target: 3 A/B tests live at all times. Velocity: decision within 2 weeks of full ramp.",
                  output:
                    "Experiment log with outcomes ‚Äî celebrates learnings, not just wins",
                },
                {
                  activity: "Detect and respond to metric decay",
                  detail:
                    "Metrics change over time as cohorts mature. Build cohort views, not just aggregate views.",
                  example:
                    "Aggregate D7 retention is stable. But new cohort D7 is declining ‚Äî a silent decay you'd miss without cohort view.",
                  output:
                    "Weekly cohort health report. Trigger investigation if new cohort metric deviates >10% from prior 4-week average.",
                },
              ],
            },
          ],
        },
        quiz: {
          questions: [
            {
              id: 1,
              scenario:
                "You're PM for a B2B HR platform. The sales team wants to show prospects a dashboard of 'aggregate industry benchmarks' using customer data. What's your data strategy response?",
              type: "multi",
              options: [
                "Build it immediately ‚Äî it's a great value prop",
                "Check data ownership clauses in customer contracts first",
                "Ensure customers consent to contributing anonymized data",
                "Define k-anonymity threshold (min customers per cohort to show)",
                "Treat this as a new product line ‚Äî requires separate data governance review",
              ],
              correct: [1, 2, 3, 4],
              explanation:
                "This is a data monetization question, not a feature question. You must verify legal permission (contracts), design consent flows, ensure statistical privacy (k-anonymity prevents reverse-engineering), and treat it as a new product with its own governance process. Building it immediately is the only wrong answer.",
            },
            {
              id: 2,
              scenario:
                "Your API product has 10,000 active developer accounts. Average API call volume is 500 calls/day/account. You're planning a major API version upgrade. What data do you need to evaluate rollout risk?",
              type: "multi",
              options: [
                "% of accounts using deprecated endpoints that will break",
                "Call volume distribution (top 10% of accounts = what % of traffic?)",
                "Error rate trend over the past 30 days",
                "Accounts with zero activity in last 30 days",
                "SDK version distribution across accounts",
              ],
              correct: [0, 1, 3, 4],
              explanation:
                "Breaking change risk = % of accounts on deprecated endpoints √ó their traffic share. Volume distribution reveals blast radius (if top 10% = 80% of traffic, you must migrate them first). SDK versions determine migration effort. Inactive accounts can be force-migrated with less risk. Error rate trend is useful but less critical for rollout planning ‚Äî it's more of an ongoing health signal.",
            },
            {
              id: 3,
              scenario:
                "A mobile game you're publishing hits its D1 retention target (45%) but CPI is $0.68 vs. target of $0.40. The studio wants to iterate creatives and retest. What's your decision?",
              type: "single",
              options: [
                "Kill the project ‚Äî it missed CPI target",
                "Give 2 more weeks and $10K to iterate creatives",
                "Soft launch in lower-CPI geos while iterating",
                "Update the financial model ‚Äî if LTV supports $0.68 CPI, it's viable",
                "Escalate to leadership to get more budget",
              ],
              correct: [3],
              explanation:
                "CPI targets are proxies for LTV economics, not rules in themselves. D1 at 45% is a strong retention signal ‚Äî this game likely has higher LTV than your initial model assumed. Before killing or extending blindly, recalculate: if predicted LTV at 45% D1 justifies $0.68 CPI profitably, it's a go. If not, kill. The decision is always LTV:CPI, not CPI in isolation.",
            },
            {
              id: 4,
              scenario:
                "You're launching a marketplace feature that matches freelancers to projects. On day 3 post-launch, your match rate is 22% (target: 40%). What's your diagnosis framework?",
              type: "multi",
              options: [
                "Check supply-demand ratio by category ‚Äî is there enough supply to match?",
                "Review match algorithm parameters ‚Äî is the quality threshold too strict?",
                "Check if users understand the feature ‚Äî measure feature discovery rate",
                "Analyze failed match reasons ‚Äî what's blocking matches?",
                "Look at the definition of 'match' ‚Äî is 22% measuring the right thing?",
              ],
              correct: [0, 1, 2, 3, 4],
              explanation:
                "All five are correct ‚Äî this is a diagnostic fan-out, not a single answer. In marketplace metrics, low performance can stem from: supply scarcity (inventory problem), algorithm miscalibration (product problem), discoverability failure (UX problem), structural blockers (data/logic problem), or metric definition error (measurement problem). A senior PM investigates all five before committing to a fix.",
            },
          ],
        },
      };

      const COLORS = {
        bg: "#0A0D14",
        surface: "#111520",
        border: "#1E2535",
        text: "#E8EAEF",
        muted: "#6B7894",
        accent: "#E8C547",
      };

      function DataStrategyGuide() {
        const [activeModule, setActiveModule] = useState("foundations");
        const [expandedItems, setExpandedItems] = useState({});
        const [quizAnswers, setQuizAnswers] = useState({});
        const [quizSubmitted, setQuizSubmitted] = useState({});
        const [completedModules, setCompletedModules] = useState(new Set());

        const currentModule = MODULES.find((m) => m.id === activeModule);

        const toggle = (key) =>
          setExpandedItems((p) => ({ ...p, [key]: !p[key] }));

        const markComplete = (moduleId) => {
          setCompletedModules((p) => new Set([...p, moduleId]));
        };

        const toggleQuizAnswer = (qId, optIdx) => {
          if (quizSubmitted[qId]) return;
          setQuizAnswers((p) => {
            const q = content.quiz.questions.find((q) => q.id === qId);
            if (q.type === "single") return { ...p, [qId]: [optIdx] };
            const prev = p[qId] || [];
            return {
              ...p,
              [qId]: prev.includes(optIdx)
                ? prev.filter((i) => i !== optIdx)
                : [...prev, optIdx],
            };
          });
        };

        const submitQuiz = (qId) => {
          setQuizSubmitted((p) => ({ ...p, [qId]: true }));
        };

        const styles = {
          container: {
            minHeight: "100vh",
            backgroundColor: COLORS.bg,
            color: COLORS.text,
            fontFamily: "'Georgia', 'Times New Roman', serif",
            display: "flex",
            flexDirection: "column",
          },
          header: {
            borderBottom: `1px solid ${COLORS.border}`,
            padding: "20px 32px",
            display: "flex",
            alignItems: "center",
            justifyContent: "space-between",
            position: "sticky",
            top: 0,
            backgroundColor: COLORS.bg,
            zIndex: 100,
          },
          headerTitle: {
            fontSize: "13px",
            letterSpacing: "0.2em",
            textTransform: "uppercase",
            color: COLORS.muted,
            fontFamily: "monospace",
          },
          headerAccent: { color: COLORS.accent },
          progress: {
            fontSize: "12px",
            color: COLORS.muted,
            fontFamily: "monospace",
          },
          layout: {
            display: "flex",
            flex: 1,
            minHeight: 0,
          },
          sidebar: {
            width: "220px",
            borderRight: `1px solid ${COLORS.border}`,
            padding: "24px 0",
            flexShrink: 0,
            position: "sticky",
            top: "61px",
            height: "calc(100vh - 61px)",
            overflowY: "auto",
          },
          navItem: (active, mod) => ({
            display: "flex",
            alignItems: "center",
            gap: "10px",
            padding: "10px 20px",
            cursor: "pointer",
            transition: "all 0.15s",
            borderLeft: active
              ? `2px solid ${mod.color}`
              : "2px solid transparent",
            backgroundColor: active ? "rgba(255,255,255,0.04)" : "transparent",
          }),
          navIcon: (mod, active) => ({
            fontSize: "16px",
            color: active ? mod.color : COLORS.muted,
            minWidth: "20px",
            textAlign: "center",
          }),
          navLabel: (active) => ({
            fontSize: "13px",
            color: active ? COLORS.text : COLORS.muted,
            fontFamily: "monospace",
          }),
          navCheck: {
            marginLeft: "auto",
            fontSize: "10px",
            color: "#34D399",
          },
          main: {
            flex: 1,
            padding: "40px 48px",
            overflowY: "auto",
            maxWidth: "900px",
          },
          moduleHeader: {
            marginBottom: "40px",
          },
          moduleIcon: (color) => ({
            fontSize: "32px",
            color: color,
            marginBottom: "12px",
            display: "block",
          }),
          moduleTitle: {
            fontSize: "28px",
            fontWeight: "bold",
            marginBottom: "8px",
            lineHeight: 1.2,
          },
          moduleSubtitle: {
            fontSize: "15px",
            color: COLORS.muted,
            fontStyle: "italic",
          },
          sectionLabel: {
            fontSize: "11px",
            letterSpacing: "0.2em",
            textTransform: "uppercase",
            color: currentModule?.color || COLORS.accent,
            fontFamily: "monospace",
            marginBottom: "16px",
            marginTop: "40px",
            display: "block",
          },
          card: {
            backgroundColor: COLORS.surface,
            border: `1px solid ${COLORS.border}`,
            borderRadius: "8px",
            padding: "24px",
            marginBottom: "16px",
          },
          cardTitle: {
            fontSize: "16px",
            fontWeight: "bold",
            marginBottom: "12px",
            color: COLORS.text,
          },
          cardDesc: {
            fontSize: "14px",
            color: COLORS.muted,
            lineHeight: 1.6,
            marginBottom: "20px",
          },
          layer: (color) => ({
            borderLeft: `3px solid ${color || COLORS.accent}`,
            paddingLeft: "16px",
            marginBottom: "16px",
          }),
          layerName: {
            fontSize: "14px",
            fontWeight: "bold",
            color: COLORS.text,
            marginBottom: "4px",
          },
          layerDesc: {
            fontSize: "13px",
            color: COLORS.muted,
            lineHeight: 1.5,
            marginBottom: "8px",
          },
          exampleTag: {
            display: "inline-block",
            fontSize: "12px",
            fontFamily: "monospace",
            backgroundColor: "rgba(232, 197, 71, 0.08)",
            border: "1px solid rgba(232, 197, 71, 0.2)",
            borderRadius: "4px",
            padding: "4px 10px",
            color: COLORS.accent,
          },
          shiftTable: {
            width: "100%",
            borderCollapse: "collapse",
          },
          shiftRow: (i) => ({
            backgroundColor:
              i % 2 === 0 ? "transparent" : "rgba(255,255,255,0.02)",
          }),
          shiftCell: {
            padding: "10px 16px",
            fontSize: "13px",
            borderBottom: `1px solid ${COLORS.border}`,
          },
          arrow: {
            color: currentModule?.color || COLORS.accent,
            fontSize: "16px",
            padding: "0 8px",
          },
          questionList: {
            listStyle: "none",
            padding: 0,
            margin: 0,
          },
          questionItem: {
            padding: "10px 0",
            borderBottom: `1px solid ${COLORS.border}`,
            fontSize: "14px",
            color: COLORS.text,
            lineHeight: 1.5,
            display: "flex",
            gap: "12px",
          },
          bulletDot: (color) => ({
            color: color || COLORS.accent,
            minWidth: "16px",
            marginTop: "2px",
          }),
          caseStudyBox: {
            backgroundColor: "rgba(10,13,20,0.8)",
            border: `1px solid ${currentModule?.color || COLORS.accent}`,
            borderRadius: "8px",
            padding: "24px",
            marginBottom: "16px",
          },
          badge: (color) => ({
            display: "inline-block",
            fontSize: "11px",
            fontFamily: "monospace",
            backgroundColor: color + "20",
            border: `1px solid ${color}40`,
            borderRadius: "20px",
            padding: "3px 12px",
            color: color,
            marginBottom: "12px",
          }),
          stepRow: {
            display: "flex",
            gap: "16px",
            marginBottom: "16px",
            alignItems: "flex-start",
          },
          stepNum: (color) => ({
            minWidth: "28px",
            height: "28px",
            borderRadius: "50%",
            backgroundColor: color + "20",
            border: `1px solid ${color}60`,
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            fontSize: "12px",
            fontFamily: "monospace",
            color: color,
            flexShrink: 0,
          }),
          metricGrid: {
            display: "grid",
            gridTemplateColumns: "1fr 1fr",
            gap: "16px",
          },
          metricCard: {
            backgroundColor: COLORS.bg,
            border: `1px solid ${COLORS.border}`,
            borderRadius: "6px",
            padding: "16px",
          },
          metricTitle: {
            fontSize: "11px",
            letterSpacing: "0.15em",
            textTransform: "uppercase",
            color: COLORS.muted,
            fontFamily: "monospace",
            marginBottom: "10px",
          },
          metricItem: {
            fontSize: "13px",
            color: COLORS.text,
            padding: "4px 0",
            borderBottom: `1px solid rgba(255,255,255,0.04)`,
          },
          btn: (color) => ({
            display: "inline-flex",
            alignItems: "center",
            gap: "8px",
            padding: "10px 20px",
            backgroundColor: color + "15",
            border: `1px solid ${color}40`,
            borderRadius: "6px",
            color: color,
            fontSize: "13px",
            fontFamily: "monospace",
            cursor: "pointer",
            marginTop: "24px",
            transition: "all 0.15s",
          }),
          quizCard: (submitted, correct) => ({
            backgroundColor: submitted
              ? correct
                ? "rgba(52, 211, 153, 0.06)"
                : "rgba(255, 107, 107, 0.06)"
              : COLORS.surface,
            border: submitted
              ? correct
                ? "1px solid rgba(52, 211, 153, 0.3)"
                : "1px solid rgba(255, 107, 107, 0.3)"
              : `1px solid ${COLORS.border}`,
            borderRadius: "8px",
            padding: "24px",
            marginBottom: "24px",
          }),
          optionBtn: (selected, submitted, isCorrect) => ({
            display: "flex",
            alignItems: "flex-start",
            gap: "12px",
            width: "100%",
            textAlign: "left",
            padding: "12px 16px",
            marginBottom: "8px",
            borderRadius: "6px",
            cursor: submitted ? "default" : "pointer",
            fontSize: "13px",
            lineHeight: 1.5,
            transition: "all 0.15s",
            border: submitted
              ? isCorrect
                ? "1px solid rgba(52, 211, 153, 0.6)"
                : selected
                ? "1px solid rgba(255,107,107,0.6)"
                : `1px solid ${COLORS.border}`
              : selected
              ? `1px solid rgba(232, 197, 71, 0.6)`
              : `1px solid ${COLORS.border}`,
            backgroundColor: submitted
              ? isCorrect
                ? "rgba(52, 211, 153, 0.08)"
                : selected
                ? "rgba(255,107,107,0.08)"
                : "transparent"
              : selected
              ? "rgba(232, 197, 71, 0.06)"
              : "transparent",
            color: COLORS.text,
          }),
          optionDot: (selected, submitted, isCorrect) => ({
            minWidth: "16px",
            height: "16px",
            borderRadius: "50%",
            border: `2px solid ${
              submitted
                ? isCorrect
                  ? "#34D399"
                  : selected
                  ? "#FF6B6B"
                  : COLORS.border
                : selected
                ? COLORS.accent
                : COLORS.muted
            }`,
            backgroundColor: submitted
              ? isCorrect
                ? "#34D399"
                : selected
                ? "#FF6B6B"
                : "transparent"
              : selected
              ? COLORS.accent
              : "transparent",
            marginTop: "2px",
            flexShrink: 0,
          }),
        };

        const renderFoundations = () => {
          const d = content.foundations;
          return (
            <>
              <span style={styles.sectionLabel}>Core Framework</span>
              {d.frameworks.map((fw, fi) => (
                <div key={fi} style={styles.card}>
                  <div style={styles.cardTitle}>{fw.name}</div>
                  <div style={styles.cardDesc}>{fw.description}</div>
                  {fw.layers &&
                    fw.layers.map((l, li) => (
                      <div key={li} style={styles.layer(currentModule.color)}>
                        <div style={styles.layerName}>{l.name}</div>
                        <div style={styles.layerDesc}>{l.desc}</div>
                        <span style={styles.exampleTag}>eg: {l.example}</span>
                      </div>
                    ))}
                  {fw.shifts && (
                    <table style={styles.shiftTable}>
                      <thead>
                        <tr>
                          <td
                            style={{
                              ...styles.shiftCell,
                              color: COLORS.muted,
                              fontSize: "11px",
                              letterSpacing: "0.1em",
                              textTransform: "uppercase",
                            }}
                          >
                            Junior PM
                          </td>
                          <td
                            style={{
                              ...styles.shiftCell,
                              color: COLORS.muted,
                              fontSize: "11px",
                            }}
                          ></td>
                          <td
                            style={{
                              ...styles.shiftCell,
                              color: COLORS.muted,
                              fontSize: "11px",
                              letterSpacing: "0.1em",
                              textTransform: "uppercase",
                            }}
                          >
                            Senior PM
                          </td>
                        </tr>
                      </thead>
                      <tbody>
                        {fw.shifts.map((s, si) => (
                          <tr key={si} style={styles.shiftRow(si)}>
                            <td
                              style={{
                                ...styles.shiftCell,
                                color: COLORS.muted,
                              }}
                            >
                              {s.from}
                            </td>
                            <td
                              style={{
                                ...styles.shiftCell,
                                textAlign: "center",
                              }}
                            >
                              <span style={styles.arrow}>‚Üí</span>
                            </td>
                            <td
                              style={{
                                ...styles.shiftCell,
                                color: currentModule.color,
                                fontWeight: "bold",
                              }}
                            >
                              {s.to}
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  )}
                </div>
              ))}

              <span style={styles.sectionLabel}>
                5 Questions Every PM Must Ask About Data
              </span>
              <div style={styles.card}>
                <ul style={styles.questionList}>
                  {d.keyQuestions.map((q, i) => (
                    <li key={i} style={styles.questionItem}>
                      <span style={styles.bulletDot(currentModule.color)}>
                        {i + 1}.
                      </span>
                      {q}
                    </li>
                  ))}
                </ul>
              </div>

              <span style={styles.sectionLabel}>Case Study</span>
              <div style={styles.caseStudyBox}>
                <span style={styles.badge(currentModule.color)}>CASE STUDY</span>
                <div
                  style={{
                    fontSize: "17px",
                    fontWeight: "bold",
                    marginBottom: "8px",
                  }}
                >
                  {d.caseStudy.title}
                </div>
                <div
                  style={{
                    fontSize: "13px",
                    color: COLORS.muted,
                    marginBottom: "16px",
                  }}
                >
                  {d.caseStudy.context}
                </div>
                <div
                  style={{
                    fontSize: "14px",
                    color: currentModule.color,
                    marginBottom: "20px",
                    fontStyle: "italic",
                  }}
                >
                  Challenge: {d.caseStudy.challenge}
                </div>
                {d.caseStudy.steps.map((s, i) => (
                  <div key={i} style={styles.stepRow}>
                    <div style={styles.stepNum(currentModule.color)}>{i + 1}</div>
                    <div>
                      <div
                        style={{
                          fontSize: "14px",
                          fontWeight: "bold",
                          marginBottom: "4px",
                        }}
                      >
                        {s.step}
                      </div>
                      <div
                        style={{
                          fontSize: "13px",
                          color: COLORS.muted,
                        }}
                      >
                        {s.detail}
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <button
                style={styles.btn(currentModule.color)}
                onClick={() => markComplete("foundations")}
              >
                {completedModules.has("foundations")
                  ? "‚úì Completed"
                  : "Mark as complete ‚Üí"}
              </button>
            </>
          );
        };

        const renderB2B = () => {
          const d = content.b2b;
          return (
            <>
              <span style={styles.sectionLabel}>B2B Data Framework</span>
              {d.frameworks.map((fw, fi) => (
                <div key={fi} style={styles.card}>
                  <div style={styles.cardTitle}>{fw.name}</div>
                  <div style={styles.cardDesc}>{fw.description}</div>
                  <div
                    style={{
                      display: "grid",
                      gridTemplateColumns: "1fr 1fr",
                      gap: "12px",
                    }}
                  >
                    {fw.pillars?.map((p, pi) => (
                      <div
                        key={pi}
                        style={{
                          ...styles.metricCard,
                          borderLeft: `3px solid ${currentModule.color}`,
                        }}
                      >
                        <div
                          style={{ fontSize: "20px", marginBottom: "8px" }}
                        >
                          {p.icon}
                        </div>
                        <div
                          style={{
                            fontSize: "14px",
                            fontWeight: "bold",
                            marginBottom: "6px",
                          }}
                        >
                          {p.name}
                        </div>
                        <div
                          style={{
                            fontSize: "13px",
                            color: COLORS.muted,
                            marginBottom: "10px",
                            lineHeight: 1.5,
                          }}
                        >
                          {p.desc}
                        </div>
                        <div
                          style={{
                            fontSize: "12px",
                            color: currentModule.color,
                            fontStyle: "italic",
                          }}
                        >
                          PM Action: {p.pm_action}
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              ))}

              <span style={styles.sectionLabel}>Key Metrics by Stage</span>
              <div style={styles.metricGrid}>
                {Object.entries(d.keyMetrics).map(([category, metrics]) => (
                  <div key={category} style={styles.metricCard}>
                    <div style={styles.metricTitle}>{category}</div>
                    {metrics.map((m, i) => (
                      <div key={i} style={styles.metricItem}>
                        {m}
                      </div>
                    ))}
                  </div>
                ))}
              </div>

              <span style={styles.sectionLabel}>Case Study</span>
              <div style={styles.caseStudyBox}>
                <span style={styles.badge(currentModule.color)}>CASE STUDY</span>
                <div
                  style={{
                    fontSize: "17px",
                    fontWeight: "bold",
                    marginBottom: "8px",
                  }}
                >
                  {d.caseStudy.title}
                </div>
                <div
                  style={{
                    fontSize: "13px",
                    color: COLORS.muted,
                    marginBottom: "16px",
                  }}
                >
                  {d.caseStudy.context}
                </div>
                <div
                  style={{
                    fontSize: "14px",
                    color: currentModule.color,
                    marginBottom: "20px",
                    fontStyle: "italic",
                  }}
                >
                  Challenge: {d.caseStudy.challenge}
                </div>
                {d.caseStudy.approach.map((s, i) => (
                  <div
                    key={i}
                    style={{
                      marginBottom: "16px",
                      borderLeft: `2px solid ${currentModule.color}40`,
                      paddingLeft: "16px",
                    }}
                  >
                    <div
                      style={{
                        fontSize: "11px",
                        fontFamily: "monospace",
                        color: currentModule.color,
                        marginBottom: "4px",
                      }}
                    >
                      PHASE {i + 1}: {s.phase.toUpperCase()}
                    </div>
                    <div
                      style={{
                        fontSize: "14px",
                        marginBottom: "6px",
                      }}
                    >
                      {s.action}
                    </div>
                    <div
                      style={{
                        fontSize: "13px",
                        color: "#34D399",
                        fontStyle: "italic",
                      }}
                    >
                      üí° {s.insight}
                    </div>
                  </div>
                ))}
              </div>
              <button
                style={styles.btn(currentModule.color)}
                onClick={() => markComplete("b2b")}
              >
                {completedModules.has("b2b")
                  ? "‚úì Completed"
                  : "Mark as complete ‚Üí"}
              </button>
            </>
          );
        };

        const renderAPI = () => {
          const d = content.api;
          return (
            <>
              <span style={styles.sectionLabel}>API-First Framework</span>
              <div style={styles.card}>
                <div style={styles.cardTitle}>{d.frameworks[0].name}</div>
                <div style={styles.cardDesc}>{d.frameworks[0].description}</div>
                <div
                  style={{
                    display: "flex",
                    flexDirection: "column",
                    gap: "0",
                  }}
                >
                  {d.frameworks[0].flywheel.map((node, i) => (
                    <div key={i}>
                      <div
                        style={{
                          display: "flex",
                          alignItems: "center",
                          gap: "12px",
                          padding: "10px 0",
                        }}
                      >
                        <div
                          style={{
                            width: "8px",
                            height: "8px",
                            borderRadius: "50%",
                            backgroundColor: currentModule.color,
                            flexShrink: 0,
                          }}
                        />
                        <div
                          style={{
                            fontSize: "14px",
                            color: COLORS.text,
                          }}
                        >
                          {node.node}
                        </div>
                      </div>
                      {i < d.frameworks[0].flywheel.length - 1 && (
                        <div
                          style={{
                            marginLeft: "16px",
                            paddingLeft: "12px",
                            borderLeft: `1px dashed ${currentModule.color}40`,
                            height: "20px",
                          }}
                        />
                      )}
                    </div>
                  ))}
                </div>
              </div>

              <div style={styles.card}>
                <div style={styles.cardTitle}>{d.frameworks[1].name}</div>
                {d.frameworks[1].dimensions.map((dim, di) => (
                  <div
                    key={di}
                    style={{
                      ...styles.layer(currentModule.color),
                      marginBottom: "20px",
                    }}
                  >
                    <div style={styles.layerName}>{dim.name}</div>
                    <div style={styles.layerDesc}>{dim.why}</div>
                    <div
                      style={{
                        fontSize: "12px",
                        color: currentModule.color,
                        fontStyle: "italic",
                      }}
                    >
                      PM Action: {dim.pm_action}
                    </div>
                  </div>
                ))}
              </div>

              <span style={styles.sectionLabel}>API Health Metrics</span>
              <div style={styles.metricGrid}>
                {Object.entries(d.keyMetrics).map(([cat, metrics]) => (
                  <div key={cat} style={styles.metricCard}>
                    <div style={styles.metricTitle}>{cat}</div>
                    {metrics.map((m, i) => (
                      <div key={i} style={styles.metricItem}>
                        {m}
                      </div>
                    ))}
                  </div>
                ))}
              </div>

              <span style={styles.sectionLabel}>Case Study</span>
              <div style={styles.caseStudyBox}>
                <span style={styles.badge(currentModule.color)}>CASE STUDY</span>
                <div
                  style={{
                    fontSize: "17px",
                    fontWeight: "bold",
                    marginBottom: "8px",
                  }}
                >
                  {d.caseStudy.title}
                </div>
                <div
                  style={{
                    fontSize: "13px",
                    color: COLORS.muted,
                    marginBottom: "16px",
                  }}
                >
                  {d.caseStudy.context}
                </div>
                <div
                  style={{
                    fontSize: "14px",
                    color: currentModule.color,
                    marginBottom: "20px",
                    fontStyle: "italic",
                  }}
                >
                  Challenge: {d.caseStudy.challenge}
                </div>
                {d.caseStudy.approach.map((s, i) => (
                  <div
                    key={i}
                    style={{
                      marginBottom: "16px",
                      borderLeft: `2px solid ${currentModule.color}40`,
                      paddingLeft: "16px",
                    }}
                  >
                    <div
                      style={{
                        fontSize: "11px",
                        fontFamily: "monospace",
                        color: currentModule.color,
                        marginBottom: "4px",
                      }}
                    >
                      {s.phase.toUpperCase()}
                    </div>
                    <div
                      style={{
                        fontSize: "14px",
                        marginBottom: "6px",
                      }}
                    >
                      {s.action}
                    </div>
                    <div
                      style={{
                        fontSize: "13px",
                        color: "#34D399",
                        fontStyle: "italic",
                      }}
                    >
                      üí° {s.insight}
                    </div>
                  </div>
                ))}
              </div>
              <button
                style={styles.btn(currentModule.color)}
                onClick={() => markComplete("api")}
              >
                {completedModules.has("api")
                  ? "‚úì Completed"
                  : "Mark as complete ‚Üí"}
              </button>
            </>
          );
        };

        const renderB2C = () => {
          const d = content.b2c;
          return (
            <>
              <span style={styles.sectionLabel}>Marketplace Data Model</span>
              <div style={styles.card}>
                <div style={styles.cardTitle}>{d.frameworks[0].name}</div>
                <div style={styles.cardDesc}>{d.frameworks[0].description}</div>
                <div
                  style={{
                    display: "grid",
                    gridTemplateColumns: "1fr 1fr",
                    gap: "16px",
                    marginBottom: "20px",
                  }}
                >
                  {[d.frameworks[0].sides.supply, d.frameworks[0].sides.demand].map(
                    (side, si) => (
                      <div
                        key={si}
                        style={{
                          borderLeft: `3px solid ${side.color}`,
                          paddingLeft: "14px",
                        }}
                      >
                        <div
                          style={{
                            fontSize: "13px",
                            fontWeight: "bold",
                            color: side.color,
                            marginBottom: "8px",
                          }}
                        >
                          {side.label}
                        </div>
                        {side.metrics.map((m, mi) => (
                          <div
                            key={mi}
                            style={{
                              fontSize: "12px",
                              color: COLORS.muted,
                              padding: "3px 0",
                            }}
                          >
                            ¬∑ {m}
                          </div>
                        ))}
                        <div
                          style={{
                            fontSize: "12px",
                            color: COLORS.text,
                            marginTop: "8px",
                            fontStyle: "italic",
                          }}
                        >
                          {side.strategy}
                        </div>
                      </div>
                    )
                  )}
                </div>
                <div
                  style={{
                    backgroundColor: COLORS.bg,
                    border: `1px solid ${currentModule.color}30`,
                    borderRadius: "6px",
                    padding: "16px",
                  }}
                >
                  <div
                    style={{
                      fontSize: "12px",
                      color: currentModule.color,
                      fontFamily: "monospace",
                      marginBottom: "8px",
                    }}
                  >
                    MARKETPLACE HEALTH METRICS
                  </div>
                  {d.frameworks[0].sides.intersection.metrics.map((m, i) => (
                    <div
                      key={i}
                      style={{
                        fontSize: "13px",
                        color: COLORS.text,
                        padding: "4px 0",
                      }}
                    >
                      ‚¨° {m}
                    </div>
                  ))}
                </div>
              </div>

              <span style={styles.sectionLabel}>
                Personalization Data Lifecycle
              </span>
              <div style={styles.card}>
                <div style={styles.cardTitle}>{d.frameworks[1].name}</div>
                {d.frameworks[1].stages.map((s, si) => (
                  <div
                    key={si}
                    style={{
                      display: "flex",
                      gap: "16px",
                      marginBottom: "16px",
                      alignItems: "flex-start",
                    }}
                  >
                    <div
                      style={{
                        ...styles.stepNum(currentModule.color),
                        width: "90px",
                        borderRadius: "4px",
                        fontSize: "11px",
                        flexShrink: 0,
                      }}
                    >
                      {s.stage}
                    </div>
                    <div style={{ flex: 1 }}>
                      <div
                        style={{
                          fontSize: "12px",
                          color: COLORS.muted,
                          marginBottom: "4px",
                        }}
                      >
                        Signal: {s.signal}
                      </div>
                      <div
                        style={{
                          fontSize: "13px",
                          color: currentModule.color,
                        }}
                      >
                        ‚Üí {s.action}
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <span style={styles.sectionLabel}>B2C Metrics Stack</span>
              <div style={styles.metricGrid}>
                {Object.entries(d.keyMetrics).map(([cat, metrics]) => (
                  <div key={cat} style={styles.metricCard}>
                    <div style={styles.metricTitle}>{cat}</div>
                    {metrics.map((m, i) => (
                      <div key={i} style={styles.metricItem}>
                        {m}
                      </div>
                    ))}
                  </div>
                ))}
              </div>

              <span style={styles.sectionLabel}>Case Study</span>
              <div style={styles.caseStudyBox}>
                <span style={styles.badge(currentModule.color)}>CASE STUDY</span>
                <div
                  style={{
                    fontSize: "17px",
                    fontWeight: "bold",
                    marginBottom: "8px",
                  }}
                >
                  {d.caseStudy.title}
                </div>
                <div
                  style={{
                    fontSize: "13px",
                    color: COLORS.muted,
                    marginBottom: "16px",
                  }}
                >
                  {d.caseStudy.context}
                </div>
                <div
                  style={{
                    fontSize: "14px",
                    color: currentModule.color,
                    marginBottom: "20px",
                    fontStyle: "italic",
                  }}
                >
                  Challenge: {d.caseStudy.challenge}
                </div>
                {d.caseStudy.approach.map((s, i) => (
                  <div
                    key={i}
                    style={{
                      marginBottom: "16px",
                      borderLeft: `2px solid ${currentModule.color}40`,
                      paddingLeft: "16px",
                    }}
                  >
                    <div
                      style={{
                        fontSize: "11px",
                        fontFamily: "monospace",
                        color: currentModule.color,
                        marginBottom: "4px",
                      }}
                    >
                      {s.phase.toUpperCase()}
                    </div>
                    <div
                      style={{
                        fontSize: "14px",
                        marginBottom: "6px",
                      }}
                    >
                      {s.action}
                    </div>
                    <div
                      style={{
                        fontSize: "13px",
                        color: "#34D399",
                        fontStyle: "italic",
                      }}
                    >
                      üí° {s.insight}
                    </div>
                  </div>
                ))}
              </div>
              <button
                style={styles.btn(currentModule.color)}
                onClick={() => markComplete("b2c")}
              >
                {completedModules.has("b2c")
                  ? "‚úì Completed"
                  : "Mark as complete ‚Üí"}
              </button>
            </>
          );
        };

        const renderSystemDesign = () => {
          const d = content.systemdesign;
          return (
            <>
              <span style={styles.sectionLabel}>PM System Design Concepts</span>
              <div style={styles.card}>
                <div style={styles.cardTitle}>{d.frameworks[0].name}</div>
                <div style={styles.cardDesc}>{d.frameworks[0].description}</div>
                {d.frameworks[0].concepts.map((c, ci) => (
                  <div key={ci} style={{ marginBottom: "20px" }}>
                    <button
                      onClick={() => toggle(`concept-${ci}`)}
                      style={{
                        display: "flex",
                        alignItems: "center",
                        justifyContent: "space-between",
                        width: "100%",
                        background: "none",
                        border: "none",
                        cursor: "pointer",
                        padding: "0",
                        textAlign: "left",
                      }}
                    >
                      <div
                        style={{
                          fontSize: "14px",
                          fontWeight: "bold",
                          color: expandedItems[`concept-${ci}`]
                            ? currentModule.color
                            : COLORS.text,
                        }}
                      >
                        {c.concept}
                      </div>
                      <span
                        style={{ color: COLORS.muted, fontSize: "18px" }}
                      >
                        {expandedItems[`concept-${ci}`] ? "‚àí" : "+"}
                      </span>
                    </button>
                    {expandedItems[`concept-${ci}`] && (
                      <div style={{ marginTop: "12px" }}>
                        <div
                          style={{
                            fontSize: "14px",
                            color: COLORS.muted,
                            marginBottom: "8px",
                            fontStyle: "italic",
                          }}
                        >
                          PM Question: {c.pm_question}
                        </div>
                        <div
                          style={{
                            fontSize: "13px",
                            color: COLORS.text,
                            marginBottom: "8px",
                          }}
                        >
                          {c.example}
                        </div>
                        <div
                          style={{
                            fontSize: "13px",
                            color: currentModule.color,
                          }}
                        >
                          Decision rule: {c.decision}
                        </div>
                      </div>
                    )}
                    <div
                      style={{
                        height: "1px",
                        backgroundColor: COLORS.border,
                        marginTop: "12px",
                      }}
                    />
                  </div>
                ))}
              </div>

              <span style={styles.sectionLabel}>
                PM Data Architecture Review Checklist
              </span>
              <div style={styles.card}>
                <div style={styles.cardTitle}>{d.frameworks[1].name}</div>
                <div
                  style={{
                    display: "grid",
                    gridTemplateColumns: "1fr 1fr",
                    gap: "8px",
                  }}
                >
                  {d.frameworks[1].checklist.map((item, i) => (
                    <div
                      key={i}
                      style={{
                        fontSize: "13px",
                        color: COLORS.text,
                        padding: "8px 12px",
                        backgroundColor: COLORS.bg,
                        borderRadius: "4px",
                        border: `1px solid ${COLORS.border}`,
                      }}
                    >
                      {item}
                    </div>
                  ))}
                </div>
              </div>

              <span style={styles.sectionLabel}>Case Study</span>
              <div style={styles.caseStudyBox}>
                <span style={styles.badge(currentModule.color)}>CASE STUDY</span>
                <div
                  style={{
                    fontSize: "17px",
                    fontWeight: "bold",
                    marginBottom: "8px",
                  }}
                >
                  {d.caseStudy.title}
                </div>
                <div
                  style={{
                    fontSize: "13px",
                    color: COLORS.muted,
                    marginBottom: "16px",
                  }}
                >
                  {d.caseStudy.context}
                </div>
                <div
                  style={{
                    fontSize: "14px",
                    color: currentModule.color,
                    marginBottom: "20px",
                    fontStyle: "italic",
                  }}
                >
                  Challenge: {d.caseStudy.challenge}
                </div>
                {d.caseStudy.approach.map((s, i) => (
                  <div
                    key={i}
                    style={{
                      marginBottom: "16px",
                      borderLeft: `2px solid ${currentModule.color}40`,
                      paddingLeft: "16px",
                    }}
                  >
                    <div
                      style={{
                        fontSize: "11px",
                        fontFamily: "monospace",
                        color: currentModule.color,
                        marginBottom: "4px",
                      }}
                    >
                      {s.phase.toUpperCase()}
                    </div>
                    <div
                      style={{
                        fontSize: "14px",
                        marginBottom: "6px",
                      }}
                    >
                      {s.action}
                    </div>
                    <div
                      style={{
                        fontSize: "13px",
                        color: "#34D399",
                        fontStyle: "italic",
                      }}
                    >
                      üí° {s.insight}
                    </div>
                  </div>
                ))}
              </div>
              <button
                style={styles.btn(currentModule.color)}
                onClick={() => markComplete("systemdesign")}
              >
                {completedModules.has("systemdesign")
                  ? "‚úì Completed"
                  : "Mark as complete ‚Üí"}
              </button>
            </>
          );
        };

        const renderLaunch = () => {
          const d = content.launch;
          return (
            <>
              <span style={styles.sectionLabel}>
                End-to-End Launch Playbook
              </span>
              {d.phases.map((phase, pi) => (
                <div key={pi} style={{ marginBottom: "24px" }}>
                  <div
                    style={{
                      display: "flex",
                      alignItems: "center",
                      gap: "12px",
                      marginBottom: "16px",
                      cursor: "pointer",
                    }}
                    onClick={() => toggle(`phase-${pi}`)}
                  >
                    <span
                      style={{ fontSize: "20px", color: phase.color }}
                    >
                      {phase.icon}
                    </span>
                    <div
                      style={{
                        fontSize: "16px",
                        fontWeight: "bold",
                      }}
                    >
                      {phase.phase}
                    </div>
                    <span
                      style={{
                        color: COLORS.muted,
                        marginLeft: "auto",
                        fontSize: "18px",
                      }}
                    >
                      {expandedItems[`phase-${pi}`] === false ? "+" : "‚àí"}
                    </span>
                  </div>
                  {expandedItems[`phase-${pi}`] !== false && (
                    <div style={{ paddingLeft: "32px" }}>
                      {phase.activities.map((act, ai) => (
                        <div
                          key={ai}
                          style={{
                            ...styles.card,
                            borderLeft: `3px solid ${phase.color}40`,
                            marginBottom: "12px",
                          }}
                        >
                          <div
                            style={{
                              display: "flex",
                              alignItems: "flex-start",
                              gap: "12px",
                            }}
                          >
                            <div style={styles.stepNum(phase.color)}>
                              {ai + 1}
                            </div>
                            <div style={{ flex: 1 }}>
                              <div
                                style={{
                                  fontSize: "14px",
                                  fontWeight: "bold",
                                  marginBottom: "6px",
                                }}
                              >
                                {act.activity}
                              </div>
                              <div
                                style={{
                                  fontSize: "13px",
                                  color: COLORS.muted,
                                  marginBottom: "8px",
                                  lineHeight: 1.5,
                                }}
                              >
                                {act.detail}
                              </div>
                              <span
                                style={{
                                  ...styles.exampleTag,
                                  borderColor: `${phase.color}30`,
                                  backgroundColor: `${phase.color}08`,
                                  color: phase.color,
                                }}
                              >
                                eg: {act.example}
                              </span>
                              <div
                                style={{
                                  fontSize: "12px",
                                  color: "#A78BFA",
                                  marginTop: "8px",
                                }}
                              >
                                Output: {act.output}
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              ))}
              <button
                style={styles.btn(currentModule.color)}
                onClick={() => markComplete("launch")}
              >
                {completedModules.has("launch")
                  ? "‚úì Completed"
                  : "Mark as complete ‚Üí"}
              </button>
            </>
          );
        };

        const renderQuiz = () => {
          const questions = content.quiz.questions;
          const allSubmitted = questions.every((q) => quizSubmitted[q.id]);
          const score = allSubmitted
            ? questions.filter((q) => {
                const ans = quizAnswers[q.id] || [];
                return (
                  JSON.stringify([...ans].sort()) ===
                  JSON.stringify([...q.correct].sort())
                );
              }).length
            : 0;

          return (
            <>
              <span style={styles.sectionLabel}>Cross-Model Scenarios</span>
              {allSubmitted && (
                <div
                  style={{
                    backgroundColor: "#34D39910",
                    border: "1px solid #34D39940",
                    borderRadius: "8px",
                    padding: "20px",
                    marginBottom: "24px",
                    textAlign: "center",
                  }}
                >
                  <div
                    style={{
                      fontSize: "32px",
                      fontWeight: "bold",
                      color: "#34D399",
                      marginBottom: "4px",
                    }}
                  >
                    {score}/{questions.length}
                  </div>
                  <div
                    style={{
                      fontSize: "14px",
                      color: COLORS.muted,
                    }}
                  >
                    {score === questions.length
                      ? "Perfect. You're thinking like a senior data PM."
                      : score >= 3
                      ? "Strong grasp of data strategy fundamentals."
                      : "Review the modules ‚Äî data strategy thinking takes practice."}
                  </div>
                </div>
              )}

              {questions.map((q) => {
                const submitted = quizSubmitted[q.id];
                const answers = quizAnswers[q.id] || [];
                const isCorrect =
                  submitted &&
                  JSON.stringify([...answers].sort()) ===
                    JSON.stringify([...q.correct].sort());

                return (
                  <div
                    key={q.id}
                    style={styles.quizCard(submitted, isCorrect)}
                  >
                    <div
                      style={{
                        display: "flex",
                        gap: "12px",
                        marginBottom: "16px",
                      }}
                    >
                      <span
                        style={{
                          fontFamily: "monospace",
                          fontSize: "12px",
                          color: currentModule.color,
                          minWidth: "24px",
                        }}
                      >
                        Q{q.id}
                      </span>
                      <div
                        style={{
                          fontSize: "14px",
                          lineHeight: 1.6,
                        }}
                      >
                        {q.scenario}
                      </div>
                    </div>
                    <div
                      style={{
                        fontSize: "12px",
                        color: COLORS.muted,
                        marginBottom: "12px",
                        fontStyle: "italic",
                      }}
                    >
                      {q.type === "single"
                        ? "Select the best answer."
                        : "Select all that apply."}
                    </div>
                    {q.options.map((opt, oi) => {
                      const selected = answers.includes(oi);
                      const isCorrectOpt = q.correct.includes(oi);
                      return (
                        <button
                          key={oi}
                          onClick={() => toggleQuizAnswer(q.id, oi)}
                          style={styles.optionBtn(
                            selected,
                            submitted,
                            isCorrectOpt && submitted
                          )}
                        >
                          <div
                            style={styles.optionDot(
                              selected,
                              submitted,
                              isCorrectOpt && submitted
                            )}
                          />
                          <span>{opt}</span>
                        </button>
                      );
                    })}

                    {!submitted && answers.length > 0 && (
                      <button
                        onClick={() => submitQuiz(q.id)}
                        style={{
                          ...styles.btn(currentModule.color),
                          marginTop: "12px",
                        }}
                      >
                        Check answer ‚Üí
                      </button>
                    )}

                    {submitted && (
                      <div
                        style={{
                          marginTop: "16px",
                          backgroundColor: "rgba(0,0,0,0.3)",
                          borderRadius: "6px",
                          padding: "16px",
                          fontSize: "13px",
                          lineHeight: 1.6,
                        }}
                      >
                        <span
                          style={{
                            fontWeight: "bold",
                            color: isCorrect ? "#34D399" : "#FB923C",
                          }}
                        >
                          {isCorrect ? "‚úì Correct. " : "‚úó Not quite. "}
                        </span>
                        <span style={{ color: COLORS.muted }}>
                          {q.explanation}
                        </span>
                      </div>
                    )}
                  </div>
                );
              })}
            </>
          );
        };

        const renderModule = () => {
          switch (activeModule) {
            case "foundations":
              return renderFoundations();
            case "b2b":
              return renderB2B();
            case "api":
              return renderAPI();
            case "b2c":
              return renderB2C();
            case "systemdesign":
              return renderSystemDesign();
            case "launch":
              return renderLaunch();
            case "quiz":
              return renderQuiz();
            default:
              return null;
          }
        };

        return (
          <div style={styles.container}>
            <header style={styles.header}>
              <div>
                <div style={styles.headerTitle}>
                  <span style={styles.headerAccent}>‚óà</span> DATA STRATEGY FOR
                  PRODUCT MANAGERS
                </div>
              </div>
              <div style={styles.progress}>
                {completedModules.size}/
                {MODULES.filter((m) => m.id !== "quiz").length} modules complete
                <span
                  style={{
                    display: "inline-block",
                    width: `${
                      (completedModules.size / 6) * 100
                    }px`,
                    height: "2px",
                    backgroundColor: COLORS.accent,
                    marginLeft: "12px",
                    verticalAlign: "middle",
                    maxWidth: "80px",
                    transition: "width 0.3s",
                  }}
                />
              </div>
            </header>

            <div style={styles.layout}>
              <nav style={styles.sidebar}>
                {MODULES.map((mod) => (
                  <div
                    key={mod.id}
                    style={styles.navItem(activeModule === mod.id, mod)}
                    onClick={() => setActiveModule(mod.id)}
                  >
                    <span
                      style={styles.navIcon(
                        mod,
                        activeModule === mod.id
                      )}
                    >
                      {mod.icon}
                    </span>
                    <span
                      style={styles.navLabel(
                        activeModule === mod.id,
                        mod
                      )}
                    >
                      {mod.label}
                    </span>
                    {completedModules.has(mod.id) && (
                      <span style={styles.navCheck}>‚úì</span>
                    )}
                  </div>
                ))}
              </nav>

              <main style={styles.main}>
                <div style={styles.moduleHeader}>
                  <span
                    style={styles.moduleIcon(currentModule.color)}
                  >
                    {currentModule.icon}
                  </span>
                  <h1 style={styles.moduleTitle}>
                    {currentModule.title}
                  </h1>
                  <p style={styles.moduleSubtitle}>
                    {currentModule.subtitle}
                  </p>
                </div>
                {renderModule()}
              </main>
            </div>
          </div>
        );
      }

      const rootElement = document.getElementById("root");
      const root = ReactDOM.createRoot(rootElement);
      root.render(<DataStrategyGuide />);
    </script>
  </body>
</html>
